<!-- templates/pages/employee.html -->
<div th:fragment="content" xmlns:th="http://www.thymeleaf.org">
  <h2>사원조회</h2>
  <div id="employeeGrid" class="ag-theme-alpine" style="height: 500px; width: 100%"></div>

  <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
  <script th:inline="javascript">
    const columnDefs = [
      { headerName: '사원코드', field: 'empCd' },
      { headerName: '이름', field: 'empNm' },
      { headerName: '부서코드', field: 'deptCd' }
    ];

    const gridOptions = {
      columnDefs,
      rowData: null,
      defaultColDef: {
        sortable: true, filter: true, resizable: true
      },
      pagination: true,
      paginationPageSize: 20
    };

    document.addEventListener('DOMContentLoaded', function () {
      new agGrid.Grid(document.querySelector('#employeeGrid'), gridOptions);
      fetch('/employee/list')
        .then(r => r.json())
        .then(data => gridOptions.api.setRowData(data));
    });
  </script>
</div>
